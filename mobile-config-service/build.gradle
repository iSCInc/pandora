apply plugin: 'application'

buildscript {
    repositories {
        jcenter()
        maven { url "${archivaUrl}/repository/internal" }
    }
    dependencies {
        classpath 'se.transmode.gradle:gradle-docker:1.2'
        classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.0'
        classpath 'com.wikia.gradle:marathon:0.4.16'
    }
}

version = "0.1.11"
mainClassName = "com.wikia.mobileconfig.MobileConfigApplication"

applicationDefaultJvmArgs = ["-Xms100m", "-Xmn128m", "-Xmx300m", "-XX:+UseNUMA", "-XX:+UseCondCardMark", "-XX:+UseBiasedLocking", "-XX:+UseConcMarkSweepGC", "-XX:+UseParNewGC"]

apply from: rootProject.file('gradle/marathon_deployment.gradle')
apply from: rootProject.file('gradle/pandora_common_deps.gradle')

applicationDistribution.from("mobile-config.yml.sample") {
    rename 'mobile-config.yml.sample', "${project.name}.yml"
    into 'conf'
}

tasks.deployToProd {
    mem = 1000
}

dependencies {
    compile project(":pandora-core")
}

run {
    args 'server', 'mobile-config.yml'
}
